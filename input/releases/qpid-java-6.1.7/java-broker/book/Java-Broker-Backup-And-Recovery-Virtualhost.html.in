<div class="docbook"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">11.3.&#160;Virtualhost</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="Java-Broker-Backup-And-Recovery-Virtualhost-Node.html">Prev</a>&#160;</td><th align="center" width="60%">Chapter&#160;11.&#160;Backup And Recovery</th><td align="right" width="20%">&#160;<a accesskey="n" href="Java-Broker-Appendix-Environment-Variables.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Java-Broker-Backup-And-Recovery-Virtualhost"></a>11.3.&#160;Virtualhost</h2></div></div></div><p>To perform a complete backup of a Virtualhost whilst it is stopped (or Broker down),
      simply copy all the files the exist beneath
        <code class="literal">${QPID_WORK}/&lt;name&gt;/messages</code>, assuming the virtualhost is in the
      standard location. This will copy all messages that belongs to that virtualhost.</p><p>The technique for backing up a virtualhost whilst it is running depends on its
      type.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-BDB"></a>11.3.1.&#160;BDB</h3></div></div></div><p>Use the same backup utility described above, but use the path
          <code class="literal">${QPID_WORK}/&lt;name&gt;/messages</code> instead.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-Derby"></a>11.3.2.&#160;Derby</h3></div></div></div><p>Not yet supported</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-JDBC"></a>11.3.3.&#160;JDBC</h3></div></div></div><p>The responsibility for backup is delegated to the database server itself. See the
        documentation accompanying it. Any technique that takes a consistent snapshot of the
        database is acceptable.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-Provided"></a>11.3.4.&#160;Provided</h3></div></div></div><p>The contents of the virtualhost will be backed up as part of virtualhost node that
        contains it.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-BDBHA"></a>11.3.5.&#160;BDB-HA</h3></div></div></div><p>The contents of the virtualhost will be backed up as part of virtualhost node that
        contains it.</p></div></div><div class="navfooter"><hr /><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="Java-Broker-Backup-And-Recovery-Virtualhost-Node.html">Prev</a>&#160;</td><td align="center" width="20%"><a accesskey="u" href="Java-Broker-Backup-And-Recovery.html">Up</a></td><td align="right" width="40%">&#160;<a accesskey="n" href="Java-Broker-Appendix-Environment-Variables.html">Next</a></td></tr><tr><td align="left" valign="top" width="40%">11.2.&#160;Virtualhost Node&#160;</td><td align="center" width="20%"><a accesskey="h" href="AMQP-Messaging-Broker-Java-Book.html">Home</a></td><td align="right" valign="top" width="40%">&#160;Appendix&#160;A.&#160;Environment Variables</td></tr></table></div></div>