<div class="docbook"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">7.4.&#160;Virtualhost Nodes</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="Java-Broker-Management-Managing-Broker.html">Prev</a>&#160;</td><th align="center" width="60%">Chapter&#160;7.&#160;Managing Entities</th><td align="right" width="20%">&#160;<a accesskey="n" href="Java-Broker-Management-Managing-Virtualhosts.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Java-Broker-Management-Managing-Virtualhost-Nodes"></a>7.4.&#160;Virtualhost Nodes</h2></div></div></div><p>Virtualhost nodes can only be managed by the HTTP management channel.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Management-Managing-Virtualhost-Nodes-Types"></a>7.4.1.&#160;Types</h3></div></div></div><p> The following virtualhost nodes types are supported. </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>BDB - Node backed with Oracle BDB <a class="footnote" href="#ftn.d0e3123" id="d0e3123"><sup class="footnote">[6]</sup></a></p></li><li class="listitem"><p>BDB HA - Node backed with Oracle BDB utilising High
          Availability</p></li><li class="listitem"><p>DERBY - Node backed with Apache Derby</p></li><li class="listitem"><p>JDBC - Node backed with an external database <a class="footnote" href="#ftn.d0e3137" id="d0e3137"><sup class="footnote">[7]</sup></a></p></li><li class="listitem"><p>JSON - Node backed with a file containing json</p></li><li class="listitem"><p>Memory - In-memory node (changes lost on Broker restart)</p></li></ul></div><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Management-Managing-Virtualhost-Nodes-Attributes"></a>7.4.2.&#160;Attributes</h3></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Name the virtualhost node</em></span>.</p></li><li class="listitem"><p><span class="emphasis"><em>Default Virtual Host Node</em></span>. If true, messaging clients which do
            not specify a virtualhost name will be connected to the virtualhost beneath this node.</p></li><li class="listitem"><p><span class="emphasis"><em>Store Path or JDBC URL.</em></span> Refers the location used to store the
            configuration of the virtualhost.</p></li><li class="listitem"><p><span class="emphasis"><em>Role</em></span> (HA only). The role that this node is currently playing in
            the group. </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>MASTER - Virtualhost node is a master.</p></li><li class="listitem"><p>REPLICA - Virtualhost node is a replica.</p></li><li class="listitem"><p>WAITING - Virtualhost node is awaiting an election result, or may be awaiting
                  more nodes to join in order that an election may be held.</p></li><li class="listitem"><p>DETACHED - Virtualhost node is disconnected from the group.</p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em>Priority</em></span> (HA only). The priority of this node when elections
            occurs. The attribute can be used to make it more likely for a node to be elected than
            other nodes, or disallow the node from never being elected at all. See <a class="xref" href="Java-Broker-High-Availability-Behaviour.html#Java-Broker-High-Availability-Behaviour-NodePriority" title="10.4.3.&#160;Node Priority">Section&#160;10.4.3, &#8220;Node Priority&#8221;</a></p></li><li class="listitem"><p><span class="emphasis"><em>Minimum Number Of Nodes</em></span> (HA only - groups of three or more).
            Allows the number of nodes required to hold an election to be reduced in order that
            service can be restore when less than quorum nodes are present. See <a class="xref" href="Java-Broker-High-Availability-Behaviour.html#Java-Broker-High-Availability-Behaviour-MinimumNumberOfNodes" title="10.4.4.&#160;Required Minimum Number Of Nodes">Section&#160;10.4.4, &#8220;Required Minimum Number Of Nodes&#8221;</a></p></li><li class="listitem"><p><span class="emphasis"><em>Allow this node to operate solo</em></span> (HA only - groups of two). Allows a single
            node in a two node group to operate solo. See <a class="xref" href="Java-Broker-High-Availability-Behaviour.html#Java-Broker-High-Availability-Behaviour-DesignatedPrimary" title="10.4.5.&#160;Allow to Operate Solo">Section&#160;10.4.5, &#8220;Allow to Operate Solo&#8221;</a></p></li></ul></div><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Management-Managing-Virtualhost-Node-Children"></a>7.4.3.&#160;Children</h3></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="Java-Broker-Management-Managing-Virtualhosts.html" title="7.5.&#160;VirtualHosts">Virtualhost</a>
          </p></li><li class="listitem"><p>
            <a class="link" href="Java-Broker-Management-Managing-RemoteReplicationNodes.html" title="7.6.&#160;Remote Replication Nodes">Remote
              Replication Nodes</a>
          </p></li></ul></div><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Management-Managing-Virtualhost-Node-Lifecycle"></a>7.4.4.&#160;Lifecycle</h3></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Stop</em></span>. Stops the virtualhost node. This closes any existing
            messaging connections to the virtualhost and prevents new ones. Any inflight
            transactions are rolled back. Non durable queues and exchanges are lost. Transient
            messages or persistent messages on non-durable queues are lost.</p><p>When HA is in use, stopping the virtualhost node stops the virtualhost node from
            participating in the group. If the node was in the master role, the remaining nodes will
            try to conduct an election and elect a new master. If the node was in the replica role,
            the node will cease to keep up to date with later transactions. A stopped node does not
            vote in elections. Other nodes in the group will report the stopped node as
            unreachable.</p></li><li class="listitem"><p><span class="emphasis"><em>Start</em></span>. Activates the virtualhost node.</p></li><li class="listitem"><p><span class="emphasis"><em>Delete</em></span>. Deletes the virtualhost node and the virtualhost
            contained within it. All exchanges and queues, any the messages contained within it are
            removed. In the HA case, deleting the virtualhost node causes it be removed permanently
            from the group.</p></li></ul></div><p>
    </p></div><div class="footnotes"><br /><hr style="width:100; text-align:left;margin-left: 0" /><div class="footnote" id="ftn.d0e3123"><p><a class="para" href="#d0e3123"><sup class="para">[6] </sup></a>Oracle BDB JE is optional. See <a class="xref" href="Java-Broker-Miscellaneous-Installing-Oracle-BDB-JE.html" title="E.3.&#160;Installing Oracle BDB JE">Section&#160;E.3, &#8220;Installing Oracle BDB JE&#8221;</a>.</p></div><div class="footnote" id="ftn.d0e3137"><p><a class="para" href="#d0e3137"><sup class="para">[7] </sup></a>JDBC 4.0 compatible drivers must be available. See <a class="xref" href="Java-Broker-Miscellaneous-Installing-External-JDBC-Driver.html" title="E.2.&#160;Installing External JDBC Driver">Section&#160;E.2, &#8220;Installing External JDBC Driver&#8221;</a></p></div></div></div><div class="navfooter"><hr /><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="Java-Broker-Management-Managing-Broker.html">Prev</a>&#160;</td><td align="center" width="20%"><a accesskey="u" href="Java-Broker-Management-Managing-Entities.html">Up</a></td><td align="right" width="40%">&#160;<a accesskey="n" href="Java-Broker-Management-Managing-Virtualhosts.html">Next</a></td></tr><tr><td align="left" valign="top" width="40%">7.3.&#160;Broker&#160;</td><td align="center" width="20%"><a accesskey="h" href="AMQP-Messaging-Broker-Java-Book.html">Home</a></td><td align="right" valign="top" width="40%">&#160;7.5.&#160;VirtualHosts</td></tr></table></div></div>