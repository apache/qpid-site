<div class="docbook"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.3. Virtualhost</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="Java-Broker-Backup-And-Recovery-Virtualhost-Node.html">Prev</a> </td><th width="60%" align="center">Chapter 11. Backup And Recovery</th><td width="20%" align="right"> <a accesskey="n" href="Java-Broker-Appendix-Environment-Variables.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Java-Broker-Backup-And-Recovery-Virtualhost"></a>11.3. Virtualhost</h2></div></div></div><p>To perform a complete backup of a Virtualhost whilst it is stopped (or Broker down),
      simply copy all the files the exist beneath
        <code class="literal">${QPID_WORK}/&lt;name&gt;/messages</code>, assuming the virtualhost is in the
      standard location. This will copy all messages that belongs to that virtualhost.</p><p>The technique for backing up a virtualhost whilst it is running depends on its
      type.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-BDB"></a>11.3.1. BDB</h3></div></div></div><p>Use the same backup utility described above, but use the path
          <code class="literal">${QPID_WORK}/&lt;name&gt;/messages</code> instead.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-Derby"></a>11.3.2. Derby</h3></div></div></div><p>Not yet supported</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-JDBC"></a>11.3.3. JDBC</h3></div></div></div><p>The responsibility for backup is delegated to the database server itself. See the
        documentation accompanying it. Any technique that takes a consistent snapshot of the
        database is acceptable.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-Provided"></a>11.3.4. Provided</h3></div></div></div><p>The contents of the virtualhost will be backed up as part of virtualhost node that
        contains it.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Backup-And-Recovery-Virtualhost-BDBHA"></a>11.3.5. BDB-HA</h3></div></div></div><p>The contents of the virtualhost will be backed up as part of virtualhost node that
        contains it.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="Java-Broker-Backup-And-Recovery-Virtualhost-Node.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="Java-Broker-Backup-And-Recovery.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="Java-Broker-Appendix-Environment-Variables.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">11.2. Virtualhost Node </td><td width="20%" align="center"><a accesskey="h" href="Apache-Qpid-Broker-J-Book.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix A. Environment Variables</td></tr></table></div></div>