<div class="docbook"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">13.7.&#160;Client failover configuration</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="Java-Broker-High-Availability-DurabilityGuarantee.html">Prev</a>&#160;</td><th align="center" width="60%">Chapter&#160;13.&#160;High Availability</th><td align="right" width="20%">&#160;<a accesskey="n" href="Java-Broker-High-Availability-JMXAPI.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Java-Broker-High-Availability-ClientFailover"></a>13.7.&#160;Client failover configuration</h2></div></div></div><p>The details about format of Qpid connection URLs can be found at section
        <a class="ulink" href="{{site_url}}/releases/qpid-0.30/programming/book/QpidJNDI.html#section-jms-connection-url" target="_top">Connection URLs</a> within the client documentation.</p><p>The failover policy option in the connection URL for the HA Cluster should be set to <span class="emphasis"><em>roundrobin</em></span>.
      The Master broker should be put into a first place in <span class="emphasis"><em>brokerlist</em></span> URL option.
      The recommended value for <span class="emphasis"><em>connectdelay</em></span> option in broker URL should be set to
      the value greater than 1000 milliseconds. If it is desired that clients re-connect automatically after a
      master to replica failure, <code class="varname">cyclecount</code> should be tuned so that the retry period is longer than
      the expected length of time to perform the failover.</p><div class="example"><a id="idm140304440878944"></a><p class="title"><strong>Example&#160;13.2.&#160;Example of connection URL for the HA Cluster</strong></p><div class="example-contents">
amqp://guest:guest@clientid/test?brokerlist='tcp://localhost:5672?connectdelay='2000'&amp;retries='3';tcp://localhost:5671?connectdelay='2000'&amp;retries='3';tcp://localhost:5673?connectdelay='2000'&amp;retries='3''&amp;failover='roundrobin?cyclecount='30''
        </div></div><br class="example-break" /></div><div class="navfooter"><hr /><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="Java-Broker-High-Availability-DurabilityGuarantee.html">Prev</a>&#160;</td><td align="center" width="20%"><a accesskey="u" href="Java-Broker-High-Availability.html">Up</a></td><td align="right" width="40%">&#160;<a accesskey="n" href="Java-Broker-High-Availability-JMXAPI.html">Next</a></td></tr><tr><td align="left" valign="top" width="40%">13.6.&#160;Durability Guarantees&#160;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td align="right" valign="top" width="40%">&#160;13.8.&#160;Qpid JMX API for HA</td></tr></table></div></div>