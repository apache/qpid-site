<!DOCTYPE html>
<!--
 -
 - Licensed to the Apache Software Foundation (ASF) under one
 - or more contributor license agreements.  See the NOTICE file
 - distributed with this work for additional information
 - regarding copyright ownership.  The ASF licenses this file
 - to you under the Apache License, Version 2.0 (the
 - "License"); you may not use this file except in compliance
 - with the License.  You may obtain a copy of the License at
 -
 -   http://www.apache.org/licenses/LICENSE-2.0
 -
 - Unless required by applicable law or agreed to in writing,
 - software distributed under the License is distributed on an
 - "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 - KIND, either express or implied.  See the License for the
 - specific language governing permissions and limitations
 - under the License.
 -
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>7.4.&#160;Virtualhost Nodes - Apache Qpid&#8482;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="/site.css" type="text/css" async="async"/>
    <link rel="stylesheet" href="/deferred.css" type="text/css" defer="defer"/>
    <script type="text/javascript">var _deferredFunctions = [];</script>
    <script type="text/javascript" src="/deferred.js" defer="defer"></script>
    <!--[if lte IE 8]>
      <link rel="stylesheet" href="/ie.css" type="text/css"/>
      <script type="text/javascript" src="/html5shiv.js"></script>
    <![endif]-->

    <!-- Redirects for `go get` and godoc.org -->
    <meta name="go-import"
          content="qpid.apache.org git https://git-wip-us.apache.org/repos/asf/qpid-proton.git"/>
    <meta name="go-source"
          content="qpid.apache.org
https://github.com/apache/qpid-proton/blob/go1/README.md
https://github.com/apache/qpid-proton/tree/go1{/dir}
https://github.com/apache/qpid-proton/blob/go1{/dir}/{file}#L{line}"/>
  </head>
  <body>
    <div id="-content">
      <div id="-top" class="panel">
        <a id="-menu-link"><img width="16" height="16" src="" alt="Menu"/></a>

        <a id="-search-link"><img width="22" height="16" src="" alt="Search"/></a>

        <ul id="-global-navigation">
          <li><a id="-logotype" href="/index.html">Apache Qpid<sup>&#8482;</sup></a></li>
          <li><a href="/documentation.html">Documentation</a></li>
          <li><a href="/download.html">Download</a></li>
          <li><a href="/discussion.html">Discussion</a></li>
        </ul>
      </div>

      <div id="-menu" class="panel" style="display: none;">
        <div class="flex">
          <section>
            <h3>Project</h3>

            <ul>
              <li><a href="/overview.html">Overview</a></li>
              <li><a href="/components/index.html">Components</a></li>
              <li><a href="/releases/index.html">Releases</a></li>
            </ul>
          </section>

          <section>
            <h3>Messaging APIs</h3>

            <ul>
              <li><a href="/proton/index.html">Qpid Proton</a></li>
              <li><a href="/components/jms/index.html">Qpid JMS</a></li>
              <li><a href="/components/messaging-api/index.html">Qpid Messaging API</a></li>
            </ul>
          </section>

          <section>
            <h3>Servers and tools</h3>

            <ul>
              <li><a href="/components/broker-j/index.html">Broker-J</a></li>
              <li><a href="/components/cpp-broker/index.html">C++ broker</a></li>
              <li><a href="/components/dispatch-router/index.html">Dispatch router</a></li>
            </ul>
          </section>

          <section>
            <h3>Resources</h3>

            <ul>
              <li><a href="/dashboard.html">Dashboard</a></li>
              <li><a href="https://cwiki.apache.org/confluence/display/qpid/Index">Wiki</a></li>
              <li><a href="/resources.html">More resources</a></li>
            </ul>
          </section>
        </div>
      </div>

      <div id="-search" class="panel" style="display: none;">
        <form action="http://www.google.com/search" method="get">
          <input type="hidden" name="sitesearch" value="qpid.apache.org"/>
          <input type="text" name="q" maxlength="255" autofocus="autofocus" tabindex="1"/>
          <button type="submit">Search</button>
          <a href="/search.html">More ways to search</a>
        </form>
      </div>

      <div id="-middle" class="panel">
        <ul id="-path-navigation"><li><a href="/index.html">Home</a></li><li><a href="/releases/index.html">Releases</a></li><li><a href="/releases/qpid-java-6.0.5/index.html">Qpid for Java 6.0.5</a></li><li><a href="/releases/qpid-java-6.0.5/java-broker/book/index.html">Apache Qpid Broker for Java</a></li><li>7.4.&#160;Virtualhost Nodes</li></ul>

        <div id="-middle-content">
          <div class="docbook"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">7.4.&#160;Virtualhost Nodes</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="Java-Broker-Management-Managing-Broker.html">Prev</a>&#160;</td><th align="center" width="60%">Chapter&#160;7.&#160;Managing Entities</th><td align="right" width="20%">&#160;<a accesskey="n" href="Java-Broker-Management-Managing-Virtualhosts.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Java-Broker-Management-Managing-Virtualhost-Nodes"></a>7.4.&#160;Virtualhost Nodes</h2></div></div></div><p>Virtualhost nodes can only be managed by the HTTP management channel.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Management-Managing-Virtualhost-Nodes-Types"></a>7.4.1.&#160;Types</h3></div></div></div><p> The following virtualhost nodes types are supported. </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>BDB - Node backed with Oracle BDB <a class="footnote" href="#ftn.d0e2695" id="d0e2695"><sup class="footnote">[6]</sup></a></p></li><li class="listitem"><p>BDB HA - Node backed with Oracle BDB utilising High
          Availability</p></li><li class="listitem"><p>DERBY - Node backed with Apache Derby</p></li><li class="listitem"><p>JDBC - Node backed with an external database <a class="footnote" href="#ftn.d0e2709" id="d0e2709"><sup class="footnote">[7]</sup></a></p></li><li class="listitem"><p>JSON - Node backed with a file containing json</p></li><li class="listitem"><p>Memory - In-memory node (changes lost on Broker restart)</p></li></ul></div><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Management-Managing-Virtualhost-Nodes-Attributes"></a>7.4.2.&#160;Attributes</h3></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Name the virtualhost node</em></span>.</p></li><li class="listitem"><p><span class="emphasis"><em>Default Virtual Host Node</em></span>. If true, messaging clients which do
            not specify a virtualhost name will be connected to the virtualhost beneath this node.</p></li><li class="listitem"><p><span class="emphasis"><em>Store Path or JDBC URL.</em></span> Refers the location used to store the
            configuration of the virtualhost.</p></li><li class="listitem"><p><span class="emphasis"><em>Role</em></span> (HA only). The role that this node is currently playing in
            the group. </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>MASTER - Virtualhost node is a master.</p></li><li class="listitem"><p>REPLICA - Virtualhost node is a replica.</p></li><li class="listitem"><p>WAITING - Virtualhost node is awaiting an election result, or may be awaiting
                  more nodes to join in order that an election may be held.</p></li><li class="listitem"><p>DETACHED - Virtualhost node is disconnected from the group.</p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em>Priority</em></span> (HA only). The priority of this node when elections
            occurs. The attribute can be used to make it more likely for a node to be elected than
            other nodes, or disallow the node from never being elected at all. See <a class="xref" href="Java-Broker-High-Availability-Behaviour.html#Java-Broker-High-Availability-Behaviour-NodePriority" title="10.4.3.&#160;Node Priority">Section&#160;10.4.3, &#8220;Node Priority&#8221;</a></p></li><li class="listitem"><p><span class="emphasis"><em>Minimum Number Of Nodes</em></span> (HA only - groups of three or more).
            Allows the number of nodes required to hold an election to be reduced in order that
            service can be restore when less than quorum nodes are present. See <a class="xref" href="Java-Broker-High-Availability-Behaviour.html#Java-Broker-High-Availability-Behaviour-MinimumNumberOfNodes" title="10.4.4.&#160;Required Minimum Number Of Nodes">Section&#160;10.4.4, &#8220;Required Minimum Number Of Nodes&#8221;</a></p></li><li class="listitem"><p><span class="emphasis"><em>Designated Primary</em></span> (HA only - groups of two). Allows a single
            node in a two node group to operate solo. See <a class="xref" href="Java-Broker-High-Availability-Behaviour.html#Java-Broker-High-Availability-Behaviour-DesignatedPrimary" title="10.4.5.&#160;Designated Primary">Section&#160;10.4.5, &#8220;Designated Primary&#8221;</a></p></li></ul></div><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Management-Managing-Virtualhost-Node-Children"></a>7.4.3.&#160;Children</h3></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="Java-Broker-Management-Managing-Virtualhosts.html" title="7.5.&#160;VirtualHosts">Virtualhost</a>
          </p></li><li class="listitem"><p>
            <a class="link" href="Java-Broker-Management-Managing-RemoteReplicationNodes.html" title="7.6.&#160;Remote Replication Nodes">Remote
              Replication Nodes</a>
          </p></li></ul></div><p>
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Java-Broker-Management-Managing-Virtualhost-Node-Lifecycle"></a>7.4.4.&#160;Lifecycle</h3></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Stop</em></span>. Stops the virtualhost node. This closes any existing
            messaging connections to the virtualhost and prevents new ones. Any inflight
            transactions are rolled back. Non durable queues and exchanges are lost. Transient
            messages or persistent messages on non-durable queues are lost.</p><p>When HA is in use, stopping the virtualhost node stops the virtualhost node from
            participating in the group. If the node was in the master role, the remaining nodes will
            try to conduct an election and elect a new master. If the node was in the replica role,
            the node will cease to keep up to date with later transactions. A stopped node does not
            vote in elections. Other nodes in the group will report the stopped node as
            unreachable.</p></li><li class="listitem"><p><span class="emphasis"><em>Start</em></span>. Activates the virtualhost node.</p></li><li class="listitem"><p><span class="emphasis"><em>Delete</em></span>. Deletes the virtualhost node and the virtualhost
            contained within it. All exchanges and queues, any the messages contained within it are
            removed. In the HA case, deleting the virtualhost node causes it be removed permanently
            from the group.</p></li></ul></div><p>
    </p></div><div class="footnotes"><br /><hr style="width:100; text-align:left;margin-left: 0" /><div class="footnote" id="ftn.d0e2695"><p><a class="para" href="#d0e2695"><sup class="para">[6] </sup></a>Oracle BDB JE is optional. See <a class="xref" href="Java-Broker-Miscellaneous-Installing-Oracle-BDB-JE.html" title="E.3.&#160;Installing Oracle BDB JE">Section&#160;E.3, &#8220;Installing Oracle BDB JE&#8221;</a>.</p></div><div class="footnote" id="ftn.d0e2709"><p><a class="para" href="#d0e2709"><sup class="para">[7] </sup></a>JDBC 4.0 compatible drivers must be available. See <a class="xref" href="Java-Broker-Miscellaneous-Installing-External-JDBC-Driver.html" title="E.2.&#160;Installing External JDBC Driver">Section&#160;E.2, &#8220;Installing External JDBC Driver&#8221;</a></p></div></div></div><div class="navfooter"><hr /><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="Java-Broker-Management-Managing-Broker.html">Prev</a>&#160;</td><td align="center" width="20%"><a accesskey="u" href="Java-Broker-Management-Managing-Entities.html">Up</a></td><td align="right" width="40%">&#160;<a accesskey="n" href="Java-Broker-Management-Managing-Virtualhosts.html">Next</a></td></tr><tr><td align="left" valign="top" width="40%">7.3.&#160;Broker&#160;</td><td align="center" width="20%"><a accesskey="h" href="AMQP-Messaging-Broker-Java-Book.html">Home</a></td><td align="right" valign="top" width="40%">&#160;7.5.&#160;VirtualHosts</td></tr></table></div></div>

          <hr/>

          <ul id="-apache-navigation">
            <li><a href="http://www.apache.org/">Apache</a></li>
            <li><a href="http://www.apache.org/licenses/">License</a></li>
            <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
            <li><a href="http://www.apache.org/foundation/thanks.html">Thanks!</a></li>
            <li><a href="/security.html">Security</a></li>
            <li><a href="http://www.apache.org/"><img id="-apache-feather" width="48" height="14" src="" alt="Apache"/></a></li>
          </ul>

          <p id="-legal">
            Apache Qpid, Messaging built on AMQP; Copyright &#169; 2015
            The Apache Software Foundation; Licensed under
            the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache
            License, Version 2.0</a>; Apache Qpid, Qpid, Qpid Proton,
            Proton, Apache, the Apache feather logo, and the Apache Qpid
            project logo are trademarks of The Apache Software
            Foundation; All other marks mentioned may be trademarks or
            registered trademarks of their respective owners
          </p>
        </div>
      </div>
    </div>
  </body>
</html>
