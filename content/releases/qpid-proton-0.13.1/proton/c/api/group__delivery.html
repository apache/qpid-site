<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Qpid Proton C API: Delivery</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qpid Proton C API
   &#160;<span id="projectnumber">0.13.1</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__delivery.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Delivery<div class="ingroups"><a class="el" href="group__engine.html">Engine</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__disposition"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__disposition.html">Disposition</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga085159cb4136f84a02777bcc72c73fa3"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structpn__bytes__t.html">pn_bytes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga085159cb4136f84a02777bcc72c73fa3">pn_delivery_tag_t</a></td></tr>
<tr class="separator:ga085159cb4136f84a02777bcc72c73fa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacdfce854066c0a4ff4db9f9a0478f340"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a></td></tr>
<tr class="separator:gacdfce854066c0a4ff4db9f9a0478f340"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga966599b1c91cd9b33ff6977cbd63d08a"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__delivery.html#ga085159cb4136f84a02777bcc72c73fa3">pn_delivery_tag_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga966599b1c91cd9b33ff6977cbd63d08a">pn_dtag</a> (const char *bytes, size_t size)</td></tr>
<tr class="separator:ga966599b1c91cd9b33ff6977cbd63d08a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7ac1f5356fa3fb1639e25ad1d05933b"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gad7ac1f5356fa3fb1639e25ad1d05933b">pn_delivery</a> (<a class="el" href="group__link.html#ga89dad3aa7934329a7ff467c636687bc0">pn_link_t</a> *link, <a class="el" href="group__delivery.html#ga085159cb4136f84a02777bcc72c73fa3">pn_delivery_tag_t</a> tag)</td></tr>
<tr class="separator:gad7ac1f5356fa3fb1639e25ad1d05933b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58503daa93d897b69e34de1b32cfc384"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga58503daa93d897b69e34de1b32cfc384">pn_delivery_get_context</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga58503daa93d897b69e34de1b32cfc384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga511920cc2f9f2030ce398f4a4813c046"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga511920cc2f9f2030ce398f4a4813c046">pn_delivery_set_context</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery, void *context)</td></tr>
<tr class="separator:ga511920cc2f9f2030ce398f4a4813c046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace64c19b55c542fc894816bea7d57c0c"><td class="memItemLeft" align="right" valign="top">PN_EXTERN pn_record_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gace64c19b55c542fc894816bea7d57c0c">pn_delivery_attachments</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:gace64c19b55c542fc894816bea7d57c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa49ff925476e5ed5027c59e58e088f50"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__delivery.html#ga085159cb4136f84a02777bcc72c73fa3">pn_delivery_tag_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gaa49ff925476e5ed5027c59e58e088f50">pn_delivery_tag</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:gaa49ff925476e5ed5027c59e58e088f50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96e7f26b4b6776297602194c1d8f5c6f"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__link.html#ga89dad3aa7934329a7ff467c636687bc0">pn_link_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga96e7f26b4b6776297602194c1d8f5c6f">pn_delivery_link</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga96e7f26b4b6776297602194c1d8f5c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10647ef832705827cafd2e3162f97b73"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__disposition.html#ga4b28f6cd033babd8a7595fc5d292dca1">pn_disposition_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga10647ef832705827cafd2e3162f97b73">pn_delivery_local</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga10647ef832705827cafd2e3162f97b73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22f4c1f220816cefafb250dd5c2b92f4"><td class="memItemLeft" align="right" valign="top">PN_EXTERN uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga22f4c1f220816cefafb250dd5c2b92f4">pn_delivery_local_state</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga22f4c1f220816cefafb250dd5c2b92f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad971053ebf742d3ae023c7cf0e89d88b"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__disposition.html#ga4b28f6cd033babd8a7595fc5d292dca1">pn_disposition_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gad971053ebf742d3ae023c7cf0e89d88b">pn_delivery_remote</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:gad971053ebf742d3ae023c7cf0e89d88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82b9bb95f0ddb25937d5438d81b7f16f"><td class="memItemLeft" align="right" valign="top">PN_EXTERN uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga82b9bb95f0ddb25937d5438d81b7f16f">pn_delivery_remote_state</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga82b9bb95f0ddb25937d5438d81b7f16f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e57daeae02237fa168b0b35bc4fe198"><td class="memItemLeft" align="right" valign="top">PN_EXTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga1e57daeae02237fa168b0b35bc4fe198">pn_delivery_settled</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga1e57daeae02237fa168b0b35bc4fe198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ad7ae3286b0a4f553b33ea9ce5bb172"><td class="memItemLeft" align="right" valign="top">PN_EXTERN size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga6ad7ae3286b0a4f553b33ea9ce5bb172">pn_delivery_pending</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga6ad7ae3286b0a4f553b33ea9ce5bb172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad3cdc28f24b74b71e547881b16c6c20b"><td class="memItemLeft" align="right" valign="top">PN_EXTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gad3cdc28f24b74b71e547881b16c6c20b">pn_delivery_partial</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:gad3cdc28f24b74b71e547881b16c6c20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2865b95666ff6ca6e9ed9623844c15bf"><td class="memItemLeft" align="right" valign="top">PN_EXTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga2865b95666ff6ca6e9ed9623844c15bf">pn_delivery_writable</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga2865b95666ff6ca6e9ed9623844c15bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d9fd7f307a6e68bbcfa3aab1c93b81a"><td class="memItemLeft" align="right" valign="top">PN_EXTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga5d9fd7f307a6e68bbcfa3aab1c93b81a">pn_delivery_readable</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga5d9fd7f307a6e68bbcfa3aab1c93b81a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e302349ed7e71b2311549e53a65ae0d"><td class="memItemLeft" align="right" valign="top">PN_EXTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga4e302349ed7e71b2311549e53a65ae0d">pn_delivery_updated</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga4e302349ed7e71b2311549e53a65ae0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11803f844e1521b2ccaabb0259186308"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga11803f844e1521b2ccaabb0259186308">pn_delivery_update</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery, uint64_t state)</td></tr>
<tr class="separator:ga11803f844e1521b2ccaabb0259186308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b90bcc2dcacdb24983c66479d610325"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga6b90bcc2dcacdb24983c66479d610325">pn_delivery_clear</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga6b90bcc2dcacdb24983c66479d610325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38fd90d9b16366541c05d289a7bb45c3"><td class="memItemLeft" align="right" valign="top">PN_EXTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga38fd90d9b16366541c05d289a7bb45c3">pn_delivery_current</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga38fd90d9b16366541c05d289a7bb45c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b3a1e6da2acabf21fedea60198d4cdb"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#ga8b3a1e6da2acabf21fedea60198d4cdb">pn_delivery_settle</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:ga8b3a1e6da2acabf21fedea60198d4cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca0dbead0ad90a228dffcad5da5cfa5d"><td class="memItemLeft" align="right" valign="top">PN_EXTERN void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gaca0dbead0ad90a228dffcad5da5cfa5d">pn_delivery_dump</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:gaca0dbead0ad90a228dffcad5da5cfa5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafcd07b42d1380f30e6fdee1e4423b6a3"><td class="memItemLeft" align="right" valign="top">PN_EXTERN bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gafcd07b42d1380f30e6fdee1e4423b6a3">pn_delivery_buffered</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:gafcd07b42d1380f30e6fdee1e4423b6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeae1603ad26c10678175beb423733b67"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gaeae1603ad26c10678175beb423733b67">pn_work_head</a> (<a class="el" href="group__connection.html#ga886351d81ff3a977a284a206526c5aff">pn_connection_t</a> *connection)</td></tr>
<tr class="separator:gaeae1603ad26c10678175beb423733b67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebe6684c2f07fe6928a817b8f8dab0db"><td class="memItemLeft" align="right" valign="top">PN_EXTERN <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__delivery.html#gaebe6684c2f07fe6928a817b8f8dab0db">pn_work_next</a> (<a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *delivery)</td></tr>
<tr class="separator:gaebe6684c2f07fe6928a817b8f8dab0db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gacdfce854066c0a4ff4db9f9a0478f340"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An AMQP Delivery object.</p>
<p>A pn_delivery_t object encapsulates all of the endpoint state associated with an AMQP Delivery. Every delivery exists within the context of a <a class="el" href="group__link.html#ga89dad3aa7934329a7ff467c636687bc0">pn_link_t</a> object.</p>
<p>The AMQP model for settlement is based on the lifecycle of a delivery at an endpoint. At each end of a link, a delivery is created, it exists for some period of time, and finally it is forgotten, aka settled. Note that because this lifecycle happens independently at both the sender and the receiver, there are actually four events of interest in the combined lifecycle of a given delivery:</p>
<ul>
<li>created at sender</li>
<li>created at receiver</li>
<li>settled at sender</li>
<li>settled at receiver</li>
</ul>
<p>Because the sender and receiver are operating concurrently, these events can occur in a variety of different orders, and the order of these events impacts the types of failures that may occur when transferring a delivery. Eliminating scenarios where the receiver creates the delivery first, we have the following possible sequences of interest:</p>
<h2>Sender presettles (aka at-most-once): </h2>
<ol type="1">
<li>created at sender</li>
<li>settled at sender</li>
<li>created at receiver</li>
<li>settled at receiver</li>
</ol>
<p>In this configuration the sender settles (i.e. forgets about) the delivery before it even reaches the receiver, and if anything should happen to the delivery in-flight, there is no way to recover, hence the "at most once" semantics.</p>
<h2>Receiver settles first (aka at-least-once): </h2>
<ol type="1">
<li>created at sender</li>
<li>created at receiver</li>
<li>settled at receiver</li>
<li>settled at sender</li>
</ol>
<p>In this configuration the receiver settles the delivery first, and the sender settles once it sees the receiver has settled. Should anything happen to the delivery in-flight, the sender can resend, however the receiver may have already forgotten the delivery and so it could interpret the resend as a new delivery, hence the "at
least once" semantics.</p>
<h2>Receiver settles second (aka exactly-once): </h2>
<ol type="1">
<li>created at sender</li>
<li>created at receiver</li>
<li>settled at sender</li>
<li>settled at receiver</li>
</ol>
<p>In this configuration the receiver settles only once it has seen that the sender has settled. This provides the sender the option to retransmit, and the receiver has the option to recognize (and discard) duplicates, allowing for exactly once semantics.</p>
<p>Note that in the last scenario the sender needs some way to know when it is safe to settle. This is where delivery state comes in. In addition to these lifecycle related events surrounding deliveries there is also the notion of a delivery state that can change over the lifetime of a delivery, e.g. it might start out as nothing, transition to <a class="el" href="group__disposition.html#gaae349c977b37b584aa62fff6515802ca">PN_RECEIVED</a> and then transition to <a class="el" href="group__disposition.html#gac64952b813a707586c6b3898e09552e4">PN_ACCEPTED</a>. In the first two scenarios the delivery state isn't required, however in final scenario the sender would typically trigger settlement based on seeing the delivery state transition to a terminal state like <a class="el" href="group__disposition.html#gac64952b813a707586c6b3898e09552e4">PN_ACCEPTED</a> or <a class="el" href="group__disposition.html#ga44a2635392fe2e6f8869a7e1cd64db2f">PN_REJECTED</a>.</p>
<p>In practice settlement is controlled by application policy, so there may well be more options here, e.g. a sender might not settle strictly based on what has happened at the receiver, it might also choose to impose some time limit and settle after that period has expired, or it could simply have a sliding window of the last N deliveries and settle the oldest whenever a new one comes along. </p>

</div>
</div>
<a class="anchor" id="ga085159cb4136f84a02777bcc72c73fa3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structpn__bytes__t.html">pn_bytes_t</a> <a class="el" href="group__delivery.html#ga085159cb4136f84a02777bcc72c73fa3">pn_delivery_tag_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An AMQP delivery tag. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gad7ac1f5356fa3fb1639e25ad1d05933b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a>* pn_delivery </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__link.html#ga89dad3aa7934329a7ff467c636687bc0">pn_link_t</a> *&#160;</td>
          <td class="paramname"><em>link</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__delivery.html#ga085159cb4136f84a02777bcc72c73fa3">pn_delivery_tag_t</a>&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a delivery on a link.</p>
<p>Every delivery object within a link must be supplied with a unique tag. Links maintain a sequence of delivery object in the order that they are created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">link</td><td>a link object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>the delivery tag </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a newly created delivery, or NULL if there was an error </dd></dl>

</div>
</div>
<a class="anchor" id="gace64c19b55c542fc894816bea7d57c0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN pn_record_t* pn_delivery_attachments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the attachments that are associated with a delivery object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>the delivery whose attachments are to be returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the attachments for the delivery object </dd></dl>

</div>
</div>
<a class="anchor" id="gafcd07b42d1380f30e6fdee1e4423b6a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN bool pn_delivery_buffered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if a delivery is buffered.</p>
<p>A delivery that is buffered has not yet been written to the wire.</p>
<p>Note that returning false does not imply that a delivery was definitely written to the wire. If false is returned, it is not known whether the delivery was actually written to the wire or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the delivery is buffered </dd></dl>

</div>
</div>
<a class="anchor" id="ga6b90bcc2dcacdb24983c66479d610325"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN void pn_delivery_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the updated flag for a delivery.</p>
<p>See <a class="el" href="group__delivery.html#ga4e302349ed7e71b2311549e53a65ae0d">pn_delivery_updated</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga38fd90d9b16366541c05d289a7bb45c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN bool pn_delivery_current </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return true if delivery is the current delivery for its link.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if delivery is the current delivery for its link. </dd></dl>

</div>
</div>
<a class="anchor" id="gaca0dbead0ad90a228dffcad5da5cfa5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN void pn_delivery_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Utility function for printing details of a delivery.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga58503daa93d897b69e34de1b32cfc384"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN void* pn_delivery_get_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000003">Deprecated:</a></b></dt><dd>Get the application context that is associated with a delivery object.</dd></dl>
<p>The application context for a delivery may be set using <a class="el" href="group__delivery.html#ga511920cc2f9f2030ce398f4a4813c046">pn_delivery_set_context</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>the delivery whose context is to be returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the application context for the delivery object </dd></dl>

</div>
</div>
<a class="anchor" id="ga96e7f26b4b6776297602194c1d8f5c6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN <a class="el" href="group__link.html#ga89dad3aa7934329a7ff467c636687bc0">pn_link_t</a>* pn_delivery_link </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the parent link for a delivery object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the parent link </dd></dl>

</div>
</div>
<a class="anchor" id="ga10647ef832705827cafd2e3162f97b73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN <a class="el" href="group__disposition.html#ga4b28f6cd033babd8a7595fc5d292dca1">pn_disposition_t</a>* pn_delivery_local </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the local disposition for a delivery.</p>
<p>The pointer returned by this object is valid until the delivery is settled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the local disposition </dd></dl>

</div>
</div>
<a class="anchor" id="ga22f4c1f220816cefafb250dd5c2b92f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN uint64_t pn_delivery_local_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the local disposition state for a delivery.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the local disposition state </dd></dl>

</div>
</div>
<a class="anchor" id="gad3cdc28f24b74b71e547881b16c6c20b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN bool pn_delivery_partial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if a delivery only has partial message data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the delivery only contains part of a message, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga6ad7ae3286b0a4f553b33ea9ce5bb172"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN size_t pn_delivery_pending </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the amount of pending message data for a delivery.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the amount of pending message data in bytes </dd></dl>

</div>
</div>
<a class="anchor" id="ga5d9fd7f307a6e68bbcfa3aab1c93b81a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN bool pn_delivery_readable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if a delivery is readable.</p>
<p>A delivery is considered readable if it is the current delivery on an incoming link.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the delivery is readable, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="gad971053ebf742d3ae023c7cf0e89d88b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN <a class="el" href="group__disposition.html#ga4b28f6cd033babd8a7595fc5d292dca1">pn_disposition_t</a>* pn_delivery_remote </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the remote disposition for a delivery.</p>
<p>The pointer returned by this object is valid until the delivery is settled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the remote disposition </dd></dl>

</div>
</div>
<a class="anchor" id="ga82b9bb95f0ddb25937d5438d81b7f16f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN uint64_t pn_delivery_remote_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the remote disposition state for a delivery.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the remote disposition state </dd></dl>

</div>
</div>
<a class="anchor" id="ga511920cc2f9f2030ce398f4a4813c046"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN void pn_delivery_set_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000004">Deprecated:</a></b></dt><dd>Set a new application context for a delivery object.</dd></dl>
<p>The application context for a delivery object may be retrieved using <a class="el" href="group__delivery.html#ga58503daa93d897b69e34de1b32cfc384">pn_delivery_get_context</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>the delivery object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>the application context </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8b3a1e6da2acabf21fedea60198d4cdb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN void pn_delivery_settle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Settle a delivery.</p>
<p>A settled delivery can never be used again.</p>
<p>NOTE: if pn_delivery_current(delivery) is true before the call then pn_link_advance(pn_delivery_link(deliver)) is called automatically.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1e57daeae02237fa168b0b35bc4fe198"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN bool pn_delivery_settled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if a delivery is remotely settled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the delivery is settled at the remote endpoint, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="gaa49ff925476e5ed5027c59e58e088f50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN <a class="el" href="group__delivery.html#ga085159cb4136f84a02777bcc72c73fa3">pn_delivery_tag_t</a> pn_delivery_tag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the tag for a delivery object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the delivery tag </dd></dl>

</div>
</div>
<a class="anchor" id="ga11803f844e1521b2ccaabb0259186308"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN void pn_delivery_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update the disposition of a delivery.</p>
<p>When update is invoked the updated disposition of the delivery will be communicated to the peer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>the updated delivery state </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4e302349ed7e71b2311549e53a65ae0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN bool pn_delivery_updated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if a delivery is updated.</p>
<p>A delivery is considered updated whenever the peer communicates a new disposition for the delivery. Once a delivery becomes updated, it will remain so until <a class="el" href="group__delivery.html#ga6b90bcc2dcacdb24983c66479d610325">pn_delivery_clear</a> is called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the delivery is updated, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga2865b95666ff6ca6e9ed9623844c15bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN bool pn_delivery_writable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if a delivery is writable.</p>
<p>A delivery is considered writable if it is the current delivery on an outgoing link, and the link has positive credit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>a delivery object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the delivery is writable, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga966599b1c91cd9b33ff6977cbd63d08a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN <a class="el" href="group__delivery.html#ga085159cb4136f84a02777bcc72c73fa3">pn_delivery_tag_t</a> pn_dtag </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a delivery tag.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bytes</td><td>a pointer to the beginning of the tag </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>the size of the tag </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the delivery tag </dd></dl>

</div>
</div>
<a class="anchor" id="gaeae1603ad26c10678175beb423733b67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a>* pn_work_head </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__connection.html#ga886351d81ff3a977a284a206526c5aff">pn_connection_t</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extracts the first delivery on the connection that has pending operations.</p>
<p>Retrieves the first delivery on the Connection that has pending operations. A readable delivery indicates message data is waiting to be read. A writable delivery indicates that message data may be sent. An updated delivery indicates that the delivery's disposition has changed. A delivery will never be both readable and writible, but it may be both readable and updated or both writiable and updated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connection</td><td>the connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the first delivery object that needs to be serviced, else NULL if none </dd></dl>

</div>
</div>
<a class="anchor" id="gaebe6684c2f07fe6928a817b8f8dab0db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PN_EXTERN <a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a>* pn_work_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__delivery.html#gacdfce854066c0a4ff4db9f9a0478f340">pn_delivery_t</a> *&#160;</td>
          <td class="paramname"><em>delivery</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the next delivery on the connection that needs has pending operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">delivery</td><td>the previous delivery retrieved from either pn_work_head or pn_work_next </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next delivery that has pending operations, else NULL if none </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
